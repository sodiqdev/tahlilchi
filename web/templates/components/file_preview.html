<!-- web/templates/components/file_preview.html -->
<div class="mb-6">
    <label class="form-label">
        <i class="fas fa-file-upload text-blue-500"></i>
        Fayl yuklash
    </label>
    
    <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-6 text-center hover:border-blue-400 dark:hover:border-blue-500 transition">
        <input type="file" id="fileInput" onchange="handleFileSelect(this)"
               class="hidden" accept="{{ accept }}">
        
        <div id="uploadArea" onclick="document.getElementById('fileInput').click()" 
             class="cursor-pointer p-8">
            <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 dark:text-gray-500 mb-4"></i>
            <p class="text-gray-700 dark:text-gray-300 font-semibold mb-2">
                Faylni bu yerga torting yoki <span class="text-blue-500">bosing</span>
            </p>
            <p class="text-gray-500 dark:text-gray-400 text-sm">
                {{ file_types }} | Maksimal: 10MB
            </p>
        </div>
        
        <div id="filePreview" class="hidden mt-6">
            <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-4 border border-green-200 dark:border-green-800">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <i class="fas fa-check-circle text-2xl text-green-500 mr-3"></i>
                        <div>
                            <p class="font-semibold text-gray-800 dark:text-white" id="previewFileName">
                                <!-- File name will be inserted here -->
                            </p>
                            <p class="text-sm text-gray-600 dark:text-gray-400" id="previewFileSize">
                                <!-- File size will be inserted here -->
                            </p>
                        </div>
                    </div>
                    <button type="button" onclick="clearFile()" 
                            class="text-red-500 hover:text-red-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function handleFileSelect(input) {
    if (input.files.length > 0) {
        const file = input.files[0];
        const preview = document.getElementById('filePreview');
        const uploadArea = document.getElementById('uploadArea');
        
        document.getElementById('previewFileName').textContent = file.name;
        document.getElementById('previewFileSize').textContent = 
            `Hajmi: ${(file.size / 1024 / 1024).toFixed(2)} MB`;
        
        preview.classList.remove('hidden');
        uploadArea.classList.add('hidden');
    }
}

function clearFile() {
    const input = document.getElementById('fileInput');
    const preview = document.getElementById('filePreview');
    const uploadArea = document.getElementById('uploadArea');
    
    input.value = '';
    preview.classList.add('hidden');
    uploadArea.classList.remove('hidden');
}
</script>